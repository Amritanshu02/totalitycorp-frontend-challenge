{"ast":null,"code":"import _toConsumableArray from\"C:/Users/AMRITANSHU/OneDrive/Desktop/sample/assessment/frontend/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _regeneratorRuntime from\"C:/Users/AMRITANSHU/OneDrive/Desktop/sample/assessment/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/AMRITANSHU/OneDrive/Desktop/sample/assessment/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/AMRITANSHU/OneDrive/Desktop/sample/assessment/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _taggedTemplateLiteral from\"C:/Users/AMRITANSHU/OneDrive/Desktop/sample/assessment/frontend/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js\";var _templateObject;import React,{useEffect,useState}from'react';import{popularProducts}from'../data';import Product from'./Product';import styled from\"styled-components\";import axios from\"axios\";import{jsx as _jsx}from\"react/jsx-runtime\";var Container=styled.div(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n    padding: 20px;\\n    display: flex;\\n    flex-wrap: wrap;\\n    justify-content: space-between;\\n\"])));var Products=function Products(_ref){var cat=_ref.cat,filters=_ref.filters,sort=_ref.sort;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),products=_useState2[0],setProducts=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),filteredProducts=_useState4[0],setFilteredProducts=_useState4[1];useEffect(function(){var getProducts=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var res;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.get(cat?\"http://localhost:8000/product?category=\".concat(cat):\"http://localhost:8000/product\");case 3:res=_context.sent;setProducts(res.data);_context.next=9;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);case 9:case\"end\":return _context.stop();}},_callee,null,[[0,7]]);}));return function getProducts(){return _ref2.apply(this,arguments);};}();getProducts();},[cat]);useEffect(function(){cat&&setFilteredProducts(products.filter(function(item){return Object.entries(filters).every(function(_ref3){var _ref4=_slicedToArray(_ref3,2),key=_ref4[0],value=_ref4[1];return item[key].includes(value);});}));},[products,cat,filters]);useEffect(function(){if(sort===\"newest\"){setFilteredProducts(function(prev){return _toConsumableArray(prev).sort(function(a,b){return a.createdAt-b.createdAt;});});}else if(sort===\"asc\"){setFilteredProducts(function(prev){return _toConsumableArray(prev).sort(function(a,b){return a.price-b.price;});});}else{setFilteredProducts(function(prev){return _toConsumableArray(prev).sort(function(a,b){return b.price-a.price;});});}},[sort]);return/*#__PURE__*/_jsx(Container,{children:cat?filteredProducts.map(function(item){return/*#__PURE__*/_jsx(Product,{item:item},item.id);}):products.slice(0,8).map(function(item){return/*#__PURE__*/_jsx(Product,{item:item},item.id);})});};export default Products;","map":{"version":3,"names":["React","useEffect","useState","popularProducts","Product","styled","axios","jsx","_jsx","Container","div","_templateObject","_taggedTemplateLiteral","Products","_ref","cat","filters","sort","_useState","_useState2","_slicedToArray","products","setProducts","_useState3","_useState4","filteredProducts","setFilteredProducts","getProducts","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","res","wrap","_callee$","_context","prev","next","get","concat","sent","data","t0","stop","apply","arguments","filter","item","Object","entries","every","_ref3","_ref4","key","value","includes","_toConsumableArray","a","b","createdAt","price","children","map","id","slice"],"sources":["C:/Users/AMRITANSHU/OneDrive/Desktop/sample/assessment/frontend/src/components/Products.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { popularProducts } from '../data';\r\nimport Product from './Product';\r\nimport styled from \"styled-components\";\r\nimport axios from \"axios\";\r\n\r\nconst Container = styled.div`\r\n    padding: 20px;\r\n    display: flex;\r\n    flex-wrap: wrap;\r\n    justify-content: space-between;\r\n`;\r\n\r\nconst Products = ({ cat, filters, sort }) => {\r\n    const [products, setProducts] = useState([]);\r\n    const [filteredProducts, setFilteredProducts] = useState([]);\r\n\r\n    useEffect(() => {\r\n        const getProducts = async () => {\r\n            try {\r\n                const res = await axios.get(cat ? `http://localhost:8000/product?category=${cat}` : `http://localhost:8000/product`);\r\n                setProducts(res.data);\r\n            } catch (err) { }\r\n        };\r\n        getProducts()\r\n    }, [cat]);\r\n\r\n    useEffect(() => {\r\n        cat &&\r\n            setFilteredProducts(\r\n                products.filter((item) =>\r\n                    Object.entries(filters).every(([key, value]) =>\r\n                        item[key].includes(value)\r\n                    )\r\n                )\r\n            );\r\n    }, [products, cat, filters]);\r\n\r\n    useEffect(() => {\r\n        if ((sort === \"newest\")) {\r\n            setFilteredProducts((prev) =>\r\n                [...prev].sort((a, b) => a.createdAt - b.createdAt)\r\n            );\r\n        }\r\n        else if ((sort === \"asc\")) {\r\n            setFilteredProducts((prev) =>\r\n                [...prev].sort((a, b) => a.price - b.price)\r\n            );\r\n        }\r\n        else {\r\n            setFilteredProducts((prev) =>\r\n                [...prev].sort((a, b) => b.price - a.price)\r\n            );\r\n        }\r\n    }, [sort]);\r\n\r\n    return (\r\n        <Container>\r\n            {cat ? filteredProducts.map((item) => (\r\n                <Product item={item} key={item.id} />\r\n            )) : products.slice(0, 8).map((item) => (\r\n                <Product item={item} key={item.id} />\r\n            ))}\r\n        </Container>\r\n    );\r\n}\r\n\r\nexport default Products;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}