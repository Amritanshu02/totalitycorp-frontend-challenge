{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/AMRITANSHU/OneDrive/Desktop/sample/assessment/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/AMRITANSHU/OneDrive/Desktop/sample/assessment/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/AMRITANSHU/OneDrive/Desktop/sample/assessment/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from'react';import StripeCheckout from\"react-stripe-checkout\";import axios from\"axios\";// import { useHistory } from \"react-router\";\nimport{useNavigate}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";var KEY=\"pk_test_51Nd6x9SJrFQZwPjvN4LIgeoWTDcquuYdfAfGXJ8CAfLEb3X5u5lWz9gnmHjOJf8Q5VoyWgTq5u4lxoBivXuyJxcB00LkTtYT7m\";var Pay=function Pay(){var _useState=useState(null),_useState2=_slicedToArray(_useState,2),stripeToken=_useState2[0],setStripeToken=_useState2[1];// const history = useHistory();\nvar navigate=useNavigate();var onToken=function onToken(token){setStripeToken(token);};useEffect(function(){var makeRequest=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var res;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.post(\"http://localhost:8000/checkout/payment\",{tokenId:stripeToken.id,amount:2000});case 3:res=_context.sent;console.log(res.response.data);// history.push(\"/success\");\nnavigate(\"/success\");_context.next=11;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](0);console.log(_context.t0);case 11:case\"end\":return _context.stop();}},_callee,null,[[0,8]]);}));return function makeRequest(){return _ref.apply(this,arguments);};}();stripeToken&&makeRequest();},[stripeToken,navigate]);return/*#__PURE__*/_jsx(\"div\",{style:{height:\"100vh\",display:\"flex\",alignItems:\"center\",justifyContent:\"center\"},children:stripeToken?/*#__PURE__*/_jsx(\"span\",{children:\"Processing. Please wait...\"}):/*#__PURE__*/_jsx(StripeCheckout,{name:\"Shopsy\",image:\"https://avatars.githubusercontent.com/u/1486366?v=4\",billingAddress:true,shippingAddress:true,description:\"Your total is $20\",amount:2000,token:onToken,stripeKey:KEY,children:/*#__PURE__*/_jsx(\"button\",{style:{border:\"none\",width:120,borderRadius:5,padding:\"20px\",backgroundColor:\"black\",color:\"white\",fontWeight:\"600\",cursor:\"pointer\"},children:\"Pay Now\"})})});};export default Pay;","map":{"version":3,"names":["React","useEffect","useState","StripeCheckout","axios","useNavigate","jsx","_jsx","KEY","Pay","_useState","_useState2","_slicedToArray","stripeToken","setStripeToken","navigate","onToken","token","makeRequest","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","res","wrap","_callee$","_context","prev","next","post","tokenId","id","amount","sent","console","log","response","data","t0","stop","apply","arguments","style","height","display","alignItems","justifyContent","children","name","image","billingAddress","shippingAddress","description","stripeKey","border","width","borderRadius","padding","backgroundColor","color","fontWeight","cursor"],"sources":["C:/Users/AMRITANSHU/OneDrive/Desktop/sample/assessment/frontend/src/components/Pay.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport StripeCheckout from \"react-stripe-checkout\";\r\nimport axios from \"axios\";\r\n// import { useHistory } from \"react-router\";\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\nconst KEY = \"pk_test_51Nd6x9SJrFQZwPjvN4LIgeoWTDcquuYdfAfGXJ8CAfLEb3X5u5lWz9gnmHjOJf8Q5VoyWgTq5u4lxoBivXuyJxcB00LkTtYT7m\";\r\n\r\nconst Pay = () => {\r\n\r\n    const [stripeToken, setStripeToken] = useState(null);\r\n    // const history = useHistory();\r\n    const navigate = useNavigate();\r\n\r\n    const onToken = (token) => {\r\n        setStripeToken(token);\r\n    }\r\n\r\n    useEffect(() => {\r\n        const makeRequest = async () => {\r\n            try {\r\n                const res = await axios.post(\r\n                    \"http://localhost:8000/checkout/payment\",\r\n                    {\r\n                        tokenId: stripeToken.id,\r\n                        amount: 2000,\r\n                    }\r\n                );\r\n\r\n                console.log(res.response.data);\r\n                // history.push(\"/success\");\r\n                navigate(\"/success\");\r\n            } catch (error) {\r\n                console.log(error);\r\n            }\r\n        };\r\n\r\n        stripeToken && makeRequest();\r\n    }, [stripeToken, navigate]);\r\n\r\n    return (\r\n        <div\r\n            style={{\r\n                height: \"100vh\",\r\n                display: \"flex\",\r\n                alignItems: \"center\",\r\n                justifyContent: \"center\",\r\n            }}\r\n        >\r\n            {stripeToken ? (\r\n                <span>Processing. Please wait...</span>\r\n            ) : (\r\n                <StripeCheckout\r\n                    name=\"Shopsy\"\r\n                    image=\"https://avatars.githubusercontent.com/u/1486366?v=4\"\r\n                    billingAddress\r\n                    shippingAddress\r\n                    description=\"Your total is $20\"\r\n                    amount={2000}\r\n                    token={onToken}\r\n                    stripeKey={KEY}\r\n                >\r\n                    <button\r\n                        style={{\r\n                            border: \"none\",\r\n                            width: 120,\r\n                            borderRadius: 5,\r\n                            padding: \"20px\",\r\n                            backgroundColor: \"black\",\r\n                            color: \"white\",\r\n                            fontWeight: \"600\",\r\n                            cursor: \"pointer\",\r\n                        }}\r\n                    >\r\n                        Pay Now\r\n                    </button>\r\n                </StripeCheckout>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Pay;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}